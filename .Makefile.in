# vim: nowrap

.POSIX:
all: executables
debug: clean debug_executables
clean: clean_objects clean_executables
clean_objects:
	rm -f */*.o

.SUFFIXES:
.SUFFIXES: .c .o
.c.o: ; $(CC) $(_CFLAGS:  = ) -c $< -o $*.o -I .
# The (:  = ) trims multiple spaces to a single space

BLOG_EXT	= .blog
BLOG_SRCDIR	=  raw
HTML_DESTDIR	=  docs

# XXX:	These CFLAGS aren't POSIX-compliant.
#	Most modern compilers either support or ignore these flags.
#	If yours doesn't, then please comment out the following line.
CFLAGS	= -Wall -O2
LDFLAGS = -s

_CFLAGS	= $(CFLAGS) \
	  -D BLOG_EXT=$(BLOG_EXT) \
	  -D BLOG_SRCDIR=$(BLOG_SRCDIR) \
	  -D HTML_DESTDIR=$(HTML_DESTDIR)

# Auto-generated
